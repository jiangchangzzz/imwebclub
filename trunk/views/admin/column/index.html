<link href="/libs/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" /> 

    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <script>
    window.imweb = window.imweb || {};
    imweb._csrf = '<%- csrf %>';
    <% if (typeof(current_user) !== 'undefined') { %>
        imweb.user = {
            id: '<%= current_user._id %>',
            loginname: '<%= current_user.loginname %>',
            is_admin: <%= typeof(current_user.is_admin) !== 'undefined' && current_user.is_admin %>
        };
    <% } else { %>
        imweb.user = null;
    <% } %>
    
  </script>

    <div class="container-fluid">
      <div class="row-fluid">
 		<%- partial('../sidebar') %>
        <div class="span10">
		  <div class="row-fluid">
			<div class="page-header">
				<h1>文章</h1>
			</div>
			<div>
			</div>
			<table class="table table-striped table-bordered table-condensed" style="table-layout:fixed;word-break:break-all;" width="100%">
				<thead>
					<tr>
						<th style="display:none;">id</th>
						<th width="5%">专栏</th>
						<th width="8%">作者</th>
						<th width="10%">分类</th>
						<th width="10%">标题</th>
						<th width="10%">更新日期</th>
						<th width="10%">创建日期</th>
						<th width="5%">收藏</th>
						<th width="5%">浏览</th>
						<th width="5%">回复</th>
						<th width="5%">加精</th>
						<th width="5%">置顶</th>
						<th width="5%"></th>
					</tr>
				</thead>
				<tbody>
				<!-- 模版引用 -->
			<%- partial('column_list',{collection:topics, as:'topic',columns: columns}) %>
				</tbody>
			</table>
			<div class="form-group">
				<select id="column-select" class="form-control column-select">
					<% columns.forEach(function(column){ %>
					<option value="<%= column._id %>"><%= column.title %></option>
					<% }) %>
				</select>
				<button type="button" class="btn btn-primary" id="addTopic">添加</button>
				<button type="button" class="btn btn-default" id="removeTopic">移除</button>
				<span id="topic-info"></span>
			</div>

			<div class='pagination' current_page='<%= current_page %>'>
				  <ul>
				    <% var base_url = base + (base.indexOf('?') < 0 ? '?' : '&') + 'page='; %>
				    <% if (current_page == 1) { %>
				    <li class='disabled btn-step'><i class="fa fa-step-backward"></i></li>
				    <% } else { %>
				    <li class='btn-step'><a href="<%= base_url %>1"><i class="fa fa-backward"></i></a></li>
				    <% } %>

				    <%
				    var page_start = current_page - 2 > 0 ? current_page - 2 : 1;
				    var page_end = page_start + 4 >= pages ? pages : page_start + 4;
				    %>

				    <% if (page_start > 1) { %>
				    <li><a>...</a></li>
				    <% } %>

				    <% for(var i = page_start; i <= page_end; i++) { %>
				    <% if (i === current_page) { %>
				    <li class='disabled'><a><%= i %></a></li>
				    <% } else { %>
				    <li><a href='<%= base_url + i %>'><%= i %></a></li>
				    <% } %>
				    <% } %>

				    <% if (page_end < pages ) { %>
				    <li><a>...</a></li>
				    <% } %>

				    <% if (current_page == pages) { %>
				    <li class='disabled btn-step'><i class="fa fa-step-forward"></i></li>
				    <% } else { %>
				    <li class='btn-step'><a href='<%= base_url + pages %>'><i class="fa fa-forward"></i></a></li>
				    <% } %>
				  </ul>
			</div>
		  </div>
        </div>

      </div>
    </div>
 
    <script src="/libs/bootstrap/js/jquery.js"></script>
	<script src="/libs/bootstrap/js/bootstrap.min.js"></script>
